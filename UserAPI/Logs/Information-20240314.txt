2024-03-14 16:11:32.584 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: Common.Repository.IRepository`1[Common.Domain.User] Lifetime: Singleton ImplementationType: Common.Repository.SqlServerBaseReository`1[Common.Domain.User]': Unable to resolve service for type 'Common.Repository.AppDBContext' while attempting to activate 'Common.Repository.SqlServerBaseReository`1[Common.Domain.User]'.) (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Singleton ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Repository.AppDBContext' while attempting to activate 'Common.Repository.SqlServerBaseReository`1[Common.Domain.User]'.)
2024-03-14 16:14:09.077 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: Common.Repository.IRepository`1[Common.Domain.User] Lifetime: Singleton ImplementationType: Common.Repository.SqlServerBaseReository`1[Common.Domain.User]': Unable to resolve service for type 'Common.Repository.AppDBContext' while attempting to activate 'Common.Repository.SqlServerBaseReository`1[Common.Domain.User]'.) (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Singleton ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Repository.AppDBContext' while attempting to activate 'Common.Repository.SqlServerBaseReository`1[Common.Domain.User]'.)
2024-03-14 16:14:23.461 +03:00 [ERR] Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: Common.Repository.IRepository`1[Common.Domain.User] Lifetime: Transient ImplementationType: Common.Repository.SqlServerBaseReository`1[Common.Domain.User]': Unable to resolve service for type 'Common.Repository.AppDBContext' while attempting to activate 'Common.Repository.SqlServerBaseReository`1[Common.Domain.User]'.) (Error while validating the service descriptor 'ServiceType: UserServices.IUserService Lifetime: Transient ImplementationType: UserServices.UserService': Unable to resolve service for type 'Common.Repository.AppDBContext' while attempting to activate 'Common.Repository.SqlServerBaseReository`1[Common.Domain.User]'.)
2024-03-14 16:18:19.451 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 16:18:19.474 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 16:18:19.522 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 16:18:19.523 +03:00 [INF] Hosting environment: Development
2024-03-14 16:18:19.523 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 16:18:23.086 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 16:18:23.278 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 197.4678ms
2024-03-14 16:18:23.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 16:18:23.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 16:18:23.355 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 37.6051ms
2024-03-14 16:18:23.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.8315ms
2024-03-14 16:18:23.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 16:18:23.759 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.8947ms
2024-03-14 16:18:30.787 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 16:18:30.803 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 16:18:30.818 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 16:18:32.967 +03:00 [ERR] An error occurred using the connection to database '' on server ''.
2024-03-14 16:18:32.997 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Common.Repository.AppDBContext'.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2024-03-14 16:18:33.149 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[System.Collections.Generic.IReadOnlyCollection`1[[Common.Domain.User, Common.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-03-14 16:18:33.163 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 2342.3115ms
2024-03-14 16:18:33.165 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 16:18:33.172 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The ConnectionString property has not been initialized.)
 ---> System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at Common.Repository.SqlServerBaseReository`1.GetListAsync(Nullable`1 offset, Nullable`1 limit, Expression`1 predicate, Expression`1 orderBy, Nullable`1 destinct, CancellationToken token) in D:\учёба\курсы\Common.Repository\SqlServerBaseReository.cs:line 59
   at UserServices.UserService.GetListAsync(Nullable`1 offset, String name, Nullable`1 limit, CancellationToken token) in D:\учёба\курсы\UserServices\UserService.cs:line 45
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at ResultGetter(Object)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-14 16:18:33.241 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 500 null text/plain; charset=utf-8 2454.3698ms
2024-03-14 16:19:13.542 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 16:19:13.568 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 16:19:13.836 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 16:19:13.838 +03:00 [INF] Hosting environment: Development
2024-03-14 16:19:13.839 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 16:19:15.441 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 16:19:15.618 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 180.3041ms
2024-03-14 16:19:15.647 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 16:19:15.647 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 16:19:15.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 5.9622ms
2024-03-14 16:19:15.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.0604ms
2024-03-14 16:19:16.071 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 16:19:16.352 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 280.9912ms
2024-03-14 16:19:22.618 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 16:19:22.626 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 16:19:22.654 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 16:19:25.505 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 16:19:25.571 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[System.Collections.Generic.IReadOnlyCollection`1[[Common.Domain.User, Common.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-03-14 16:19:25.587 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 2931.19ms
2024-03-14 16:19:25.587 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 16:19:25.594 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 2976.9348ms
2024-03-14 16:22:02.975 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 16:22:03.145 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 16:22:03.190 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 16:22:03.190 +03:00 [INF] Hosting environment: Development
2024-03-14 16:22:03.190 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 16:22:05.040 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 16:22:05.262 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 229.3957ms
2024-03-14 16:22:05.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 16:22:05.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 16:22:05.352 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 22.8493ms
2024-03-14 16:22:05.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 228.6684ms
2024-03-14 16:22:05.715 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 16:22:05.800 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 85.2832ms
2024-03-14 16:22:11.799 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 16:22:11.805 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 16:22:11.842 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 16:22:13.474 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 16:22:13.541 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[System.Collections.Generic.IReadOnlyCollection`1[[Common.Domain.User, Common.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-03-14 16:22:13.557 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 1712.4667ms
2024-03-14 16:22:13.557 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 16:22:13.573 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 1774.5558ms
2024-03-14 17:21:35.595 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 17:21:35.631 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 17:21:35.669 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 17:21:35.669 +03:00 [INF] Hosting environment: Development
2024-03-14 17:21:35.669 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 17:21:37.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 17:21:37.831 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 213.5981ms
2024-03-14 17:21:37.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 17:21:37.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 17:21:37.863 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 9.5757ms
2024-03-14 17:21:37.918 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.2457ms
2024-03-14 17:21:37.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 17:21:38.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 105.4992ms
2024-03-14 23:12:05.220 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:12:05.304 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:12:05.404 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:12:05.405 +03:00 [INF] Hosting environment: Development
2024-03-14 23:12:05.405 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:12:07.303 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:12:07.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 302.7179ms
2024-03-14 23:12:07.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:12:07.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:12:07.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 4.7701ms
2024-03-14 23:12:07.672 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.7882ms
2024-03-14 23:12:07.747 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:12:07.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 86.7588ms
2024-03-14 23:12:20.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 23:12:20.763 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:12:20.792 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:12:24.105 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 23:12:24.163 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User[]'.
2024-03-14 23:12:24.168 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 3373.2382ms
2024-03-14 23:12:24.168 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:12:24.175 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 3441.0583ms
2024-03-14 23:12:37.552 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7128/users - application/json 20
2024-03-14 23:12:37.553 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:12:37.558 +03:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:12:37.639 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-03-14 23:12:37.649 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Post (UserAPI) in 90.7752ms
2024-03-14 23:12:37.649 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:12:37.649 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7128/users - 400 null application/problem+json; charset=utf-8 96.8206ms
2024-03-14 23:12:48.899 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7128/users - application/json 30
2024-03-14 23:12:48.899 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:12:48.900 +03:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:12:49.787 +03:00 [INF] Executed DbCommand (313ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Login], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-03-14 23:12:49.996 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Common.Repository.AppDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Login', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:19483cd5-1556-4641-8d0b-c741249f294d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Login', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:19483cd5-1556-4641-8d0b-c741249f294d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-03-14 23:12:50.431 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Post (UserAPI) in 1530.444ms
2024-03-14 23:12:50.432 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:12:50.437 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Login', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:19483cd5-1556-4641-8d0b-c741249f294d
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Repository.SqlServerBaseReository`1.AddAsync(TEntity item, CancellationToken cancellationToken) in D:\учёба\курсы\Common.Repository\SqlServerBaseReository.cs:line 32
   at UserServices.UserService.AddAsync(UserDto item, CancellationToken token) in D:\учёба\курсы\UserServices\UserService.cs:line 25
   at UserAPI.Controllers.UserController.Post(UserDto item) in D:\учёба\курсы\UserAPI\Controllers\UserController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-14 23:12:50.467 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7128/users - 500 null text/plain; charset=utf-8 1568.4649ms
2024-03-14 23:13:14.527 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7128/users - application/json 30
2024-03-14 23:13:14.527 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:13:14.528 +03:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:14:10.784 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:14:10.843 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:14:10.917 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:14:10.918 +03:00 [INF] Hosting environment: Development
2024-03-14 23:14:10.918 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:14:11.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:14:12.063 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 171.6074ms
2024-03-14 23:14:12.127 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:14:12.127 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:14:12.139 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 14.3197ms
2024-03-14 23:14:12.173 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.7059ms
2024-03-14 23:14:12.227 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:14:12.334 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 107.8602ms
2024-03-14 23:14:27.408 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:14:27.437 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:14:27.512 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:14:27.513 +03:00 [INF] Hosting environment: Development
2024-03-14 23:14:27.513 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:14:28.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:14:28.559 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 192.3318ms
2024-03-14 23:14:28.585 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:14:28.585 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:14:28.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 4.8309ms
2024-03-14 23:14:28.633 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.2616ms
2024-03-14 23:14:28.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:14:28.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.7681ms
2024-03-14 23:14:40.042 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7128/users - application/json 22
2024-03-14 23:14:40.048 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:14:40.070 +03:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:14:41.249 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Login], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-03-14 23:14:41.298 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Common.Repository.AppDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PasswordHash', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:beb99eed-9185-4549-b6af-0a08d9ed6354
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PasswordHash', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:beb99eed-9185-4549-b6af-0a08d9ed6354
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-03-14 23:14:41.459 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Post (UserAPI) in 1387.0683ms
2024-03-14 23:14:41.460 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:14:41.463 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PasswordHash', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:beb99eed-9185-4549-b6af-0a08d9ed6354
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Repository.SqlServerBaseReository`1.AddAsync(TEntity item, CancellationToken cancellationToken) in D:\учёба\курсы\Common.Repository\SqlServerBaseReository.cs:line 32
   at UserServices.UserService.AddAsync(UserDto item, CancellationToken token) in D:\учёба\курсы\UserServices\UserService.cs:line 25
   at UserAPI.Controllers.UserController.Post(UserDto item) in D:\учёба\курсы\UserAPI\Controllers\UserController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-14 23:14:41.492 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7128/users - 500 null text/plain; charset=utf-8 1450.4201ms
2024-03-14 23:15:20.846 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:15:20.907 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:15:21.014 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:15:21.014 +03:00 [INF] Hosting environment: Development
2024-03-14 23:15:21.015 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:15:21.981 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:15:22.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 194.6201ms
2024-03-14 23:15:22.203 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:15:22.203 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:15:22.315 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 112.5973ms
2024-03-14 23:15:22.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 157.125ms
2024-03-14 23:15:22.411 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:15:22.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.956ms
2024-03-14 23:15:33.805 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7128/users - application/json 23
2024-03-14 23:15:33.813 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:15:33.832 +03:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:15:35.036 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Login], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-03-14 23:15:35.083 +03:00 [INF] Executing CreatedResult, writing value of type 'UserServices.dto.UserDto'.
2024-03-14 23:15:35.089 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Post (UserAPI) in 1254.2815ms
2024-03-14 23:15:35.089 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Post (UserAPI)'
2024-03-14 23:15:35.098 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7128/users - 201 null application/json; charset=utf-8 1293.5219ms
2024-03-14 23:15:45.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 23:15:45.039 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:15:45.045 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:15:45.233 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 23:15:45.240 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User[]'.
2024-03-14 23:15:45.242 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 196.0036ms
2024-03-14 23:15:45.242 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:15:45.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 204.0445ms
2024-03-14 23:16:04.522 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:16:04.606 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:16:04.682 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:16:04.683 +03:00 [INF] Hosting environment: Development
2024-03-14 23:16:04.683 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:16:05.722 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:16:05.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 212.1893ms
2024-03-14 23:16:05.959 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:16:05.959 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:16:05.965 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 7.0718ms
2024-03-14 23:16:06.012 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.2622ms
2024-03-14 23:16:06.074 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:16:06.168 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.0116ms
2024-03-14 23:16:21.994 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7128/users - application/json 22
2024-03-14 23:16:22.003 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Put (UserAPI)'
2024-03-14 23:16:22.023 +03:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:16:23.203 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Login], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-03-14 23:16:23.249 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Common.Repository.AppDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PasswordHash', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c75f54a0-06a8-4b9c-96b0-23a5374728e5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PasswordHash', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c75f54a0-06a8-4b9c-96b0-23a5374728e5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-03-14 23:16:23.458 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Put (UserAPI) in 1432.8041ms
2024-03-14 23:16:23.459 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Put (UserAPI)'
2024-03-14 23:16:23.462 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'PasswordHash', table 'ToDoListDB.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c75f54a0-06a8-4b9c-96b0-23a5374728e5
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Repository.SqlServerBaseReository`1.UpdateAsync(TEntity item, CancellationToken cancellationToken) in D:\учёба\курсы\Common.Repository\SqlServerBaseReository.cs:line 65
   at UserServices.UserService.UpdateAsync(UserDto newItem, CancellationToken token) in D:\учёба\курсы\UserServices\UserService.cs:line 66
   at UserAPI.Controllers.UserController.Put(UserDto newItem) in D:\учёба\курсы\UserAPI\Controllers\UserController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-14 23:16:23.484 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7128/users - 500 null text/plain; charset=utf-8 1491.5434ms
2024-03-14 23:16:52.299 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:16:52.329 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:16:52.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:16:52.391 +03:00 [INF] Hosting environment: Development
2024-03-14 23:16:52.392 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:16:53.454 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:16:53.649 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 197.9371ms
2024-03-14 23:16:53.694 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:16:53.694 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:16:53.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 8.5818ms
2024-03-14 23:16:53.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.127ms
2024-03-14 23:16:53.810 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:16:53.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.1354ms
2024-03-14 23:17:06.224 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7128/users - application/json 22
2024-03-14 23:17:06.230 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Put (UserAPI)'
2024-03-14 23:17:06.249 +03:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(UserServices.dto.UserDto) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:17:07.428 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Login], [PasswordHash])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-03-14 23:17:07.478 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User'.
2024-03-14 23:17:07.484 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Put (UserAPI) in 1231.9667ms
2024-03-14 23:17:07.485 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Put (UserAPI)'
2024-03-14 23:17:07.491 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7128/users - 200 null application/json; charset=utf-8 1269.0982ms
2024-03-14 23:17:21.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users/0 - null null
2024-03-14 23:17:21.601 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetById (UserAPI)'
2024-03-14 23:17:21.606 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:17:21.885 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-14 23:17:21.995 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetById (UserAPI) in 388.808ms
2024-03-14 23:17:21.996 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetById (UserAPI)'
2024-03-14 23:17:21.998 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.BL.NotFoundExeption: Not found by filter: {"Id":0}
   at UserServices.UserService.GetByIdOrDefaultAsync(Int32 id, CancellationToken token) in D:\учёба\курсы\UserServices\UserService.cs:line 49
   at UserAPI.Controllers.UserController.GetById(Int32 id) in D:\учёба\курсы\UserAPI\Controllers\UserController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-14 23:17:22.030 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users/0 - 500 null text/plain; charset=utf-8 430.2986ms
2024-03-14 23:17:28.707 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users/8 - null null
2024-03-14 23:17:28.708 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetById (UserAPI)'
2024-03-14 23:17:28.709 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:17:28.727 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-14 23:17:28.730 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User'.
2024-03-14 23:17:28.731 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetById (UserAPI) in 21.5923ms
2024-03-14 23:17:28.731 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetById (UserAPI)'
2024-03-14 23:17:28.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users/8 - 200 null application/json; charset=utf-8 24.3122ms
2024-03-14 23:17:38.684 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7128/users/8 - null null
2024-03-14 23:17:38.685 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Delete (UserAPI)'
2024-03-14 23:17:38.693 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:17:38.697 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-14 23:17:38.719 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p0;
2024-03-14 23:17:38.723 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2024-03-14 23:17:38.725 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Delete (UserAPI) in 31.3721ms
2024-03-14 23:17:38.725 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Delete (UserAPI)'
2024-03-14 23:17:38.725 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7128/users/8 - 200 null application/json; charset=utf-8 41.312ms
2024-03-14 23:17:49.966 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 23:17:49.966 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:17:49.969 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:17:49.982 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 23:17:49.986 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User[]'.
2024-03-14 23:17:49.986 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 17.1677ms
2024-03-14 23:17:49.987 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:17:49.987 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 21.302ms
2024-03-14 23:18:06.293 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users/6 - null null
2024-03-14 23:18:06.293 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetById (UserAPI)'
2024-03-14 23:18:06.293 +03:00 [INF] Route matched with {action = "GetById", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:18:06.297 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-14 23:18:06.298 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User'.
2024-03-14 23:18:06.298 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetById (UserAPI) in 5.1299ms
2024-03-14 23:18:06.298 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetById (UserAPI)'
2024-03-14 23:18:06.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users/6 - 200 null application/json; charset=utf-8 6.465ms
2024-03-14 23:18:09.959 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 23:18:09.960 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:18:09.960 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:18:09.962 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 23:18:09.963 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User[]'.
2024-03-14 23:18:09.963 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 3.0667ms
2024-03-14 23:18:09.963 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:18:09.963 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 4.133ms
2024-03-14 23:19:09.097 +03:00 [INF] Now listening on: https://localhost:7128
2024-03-14 23:19:09.161 +03:00 [INF] Now listening on: http://localhost:5096
2024-03-14 23:19:09.223 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-14 23:19:09.223 +03:00 [INF] Hosting environment: Development
2024-03-14 23:19:09.223 +03:00 [INF] Content root path: D:\учёба\курсы\UserAPI
2024-03-14 23:19:10.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/index.html - null null
2024-03-14 23:19:10.227 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/index.html - 200 null text/html;charset=utf-8 214.9647ms
2024-03-14 23:19:10.256 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - null null
2024-03-14 23:19:10.256 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/_vs/browserLink - null null
2024-03-14 23:19:10.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_framework/aspnetcore-browser-refresh.js - 200 13750 application/javascript; charset=utf-8 5.0042ms
2024-03-14 23:19:10.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.7019ms
2024-03-14 23:19:10.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - null null
2024-03-14 23:19:10.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.1592ms
2024-03-14 23:19:18.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 23:19:18.032 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:19:18.053 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:19:19.170 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 23:19:19.219 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User[]'.
2024-03-14 23:19:19.224 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 1169.3728ms
2024-03-14 23:19:19.225 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:19:19.231 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 1207.0243ms
2024-03-14 23:19:30.773 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7128/users/6 - null null
2024-03-14 23:19:30.774 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.Delete (UserAPI)'
2024-03-14 23:19:30.779 +03:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:19:30.941 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2024-03-14 23:19:31.033 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p0;
2024-03-14 23:19:31.045 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2024-03-14 23:19:31.047 +03:00 [INF] Executed action UserAPI.Controllers.UserController.Delete (UserAPI) in 267.5885ms
2024-03-14 23:19:31.047 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.Delete (UserAPI)'
2024-03-14 23:19:31.048 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7128/users/6 - 200 null application/json; charset=utf-8 274.9827ms
2024-03-14 23:19:34.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7128/users - null null
2024-03-14 23:19:34.998 +03:00 [INF] Executing endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:19:34.999 +03:00 [INF] Route matched with {action = "GetAll", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller UserAPI.Controllers.UserController (UserAPI).
2024-03-14 23:19:35.014 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Login], [u].[PasswordHash]
FROM [Users] AS [u]
2024-03-14 23:19:35.014 +03:00 [INF] Executing OkObjectResult, writing value of type 'Common.Domain.User[]'.
2024-03-14 23:19:35.014 +03:00 [INF] Executed action UserAPI.Controllers.UserController.GetAll (UserAPI) in 15.2567ms
2024-03-14 23:19:35.014 +03:00 [INF] Executed endpoint 'UserAPI.Controllers.UserController.GetAll (UserAPI)'
2024-03-14 23:19:35.014 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7128/users - 200 null application/json; charset=utf-8 16.7542ms
